<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>TypeScript HTML App</title>
    <link rel="stylesheet" href="css/app.css" type="text/css" />
    <style>
        #editor {
            position: relative;
            height: 400px;
            width: 100%;
            margin: 10px auto;
        }
		.errorHighlight {
			background: yellow;
			position: absolute;
		}
		pre {
			margin: 10px 0;
			background: lightgray;
		}
    </style>
</head>
<body>
    <div id="container">
        <div id="top">
            <div id="top-content">
                <div id="logo">
                    <h1>
                        <a href="http://csokavar.hu/projects/minischeme">/mini-scheme</a>
                    </h1>
                </div>
            </div>
        </div> <!-- top -->

        <div id="main">
            <div id="main-content">
	            <h2>Mini scheme</h2>
	            <button id="btnRun">run</button>
	            <button id="btnBreak">break</button>
	            <button id="btnStop">stop</button>
	            <button id="btnStep">step</button>
	            <button id="btnContinue">continue</button>
                <div id="editor">(let* ((yin
         ((lambda (cc) (display "#\@") cc) (call-with-current-continuation (lambda (c) c))))
       (yang
         ((lambda (cc) (display "#\*") cc) (call-with-current-continuation (lambda (c) c)))))
    (yin yang))</div>
                <div id="output"></div>
                <pre></pre>
                <pre>(define f 
    (lambda (return)
        (return 2)
        3
    )
)
(call-with-current-continuation f)</pre>
            
                <pre id="factorial">(define fact
    (lambda(x)
        (cond
            ((= x 1) 1)
            (else (* x(fact(- x 1))))
        )
    )
)
(fact 5)
(fact 4)
            </pre>
                <pre>(define for-each 
    (lambda (dg lst)
        (cond 
            ((null? lst) ())
            (else 
                (dg (car lst))
                (for-each dg (cdr lst))
            )
        )
        
    )
)
(define y 0)
(for-each (lambda (x) (set! y (+ y x))) '(1 2 3))
(trace 'sum: y)
</pre>
	            <pre> (define for-each 
    (lambda (dg lst)
        (cond 
            ((null? lst) ())
            (else 
                (dg (car lst))
                (for-each dg (cdr lst))))
    ))
(define generate-one-element-at-a-time (lambda (lst)
  (define control-state (lambda (return)
    (for-each 
        (lambda (element)
            (set! return (call-with-current-continuation
                (lambda (resume-here)
                   (set! control-state resume-here)
                   (return element)))))
        lst)
    (return 'you-fell-off-the-end)))
  
  (define generator (lambda()
    (call-with-current-continuation control-state)))
 
  generator))
  
  
(define generate-digit
  (generate-one-element-at-a-time '(0 1 2)))
(trace 
    (generate-digit)
    (generate-digit)
    (generate-digit)
    (generate-digit))
</pre>
	            <pre>(let ((factorial
      (lambda (n)
               (cond 
                    ((= n 1)
                        1 )
                    (else 
                        (* n (factorial (- n 1)))))
            )))
      (factorial 5))
      
     </pre>
	            <pre> (define (zero? n) (= n 0) )
 
 (letrec ( 
    (even?
        (lambda (n)
            (if (zero? n)
                #t
                (odd? (- n 1)))))
    (odd?
        (lambda (n)
            (if (zero? n)
                 #f
                (even? (- n 1))))))
    (even? 88)
)
      
     </pre>
	            <pre>
					(define alma ())
(define flag #t)
(define (f)
    (display 1 "alma" "fa")
    (call-with-current-continuation
        (lambda (x) 
            (set! alma x)
        )
    )
    (display 2)
    (display 3)
    "vege"
)
(f)
(cond 
    (flag
        (set! flag #f)
        (alma)
    )
)

</pre>

            </div> <!-- main-content -->
        </div> <!-- main -->


        <div id="footer">
            <p><a href="http://www.csokavar.hu/">Encsé Művek</a> - 2015</p>
            <p>Kapcsolat: <a href="mailto:encse@csokavar.hu">encse@csokavar.hu</a></p>
        </div>

    </div> <!--container -->

    <script src="lib/requirejs/require.js"></script>
    <script>
        require.config({
            paths: {
                ace: "js/ace"
            }
        });
    </script>
    <script src="js/app.js"></script>
    <script>
		var sicpEditor = new Editor.SicpEditor("editor", "output");
		document.getElementById("btnBreak").onclick = function() { sicpEditor.break(); };
		document.getElementById("btnContinue").onclick = function () { sicpEditor.continue(); };
		document.getElementById("btnRun").onclick = function () { sicpEditor.run(); };
		document.getElementById("btnStep").onclick = function () { sicpEditor.step(); };
		document.getElementById("btnStop").onclick =function () { sicpEditor.stop(); };
    </script>
</body>
</html>
